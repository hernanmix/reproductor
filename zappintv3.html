<meta charset="UTF-8">
<meta name="robots" content="noindex, nofollow, noarchive">
<meta name="referrer" content="no-referrer">

<script src="https://ssl.p.jwpcdn.com/player/v/8.26.0/jwplayer.js"></script>
<script>
  jwplayer.key = "XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";

  function getQueryParameter(name) {
    return new URLSearchParams(window.location.search).get(name);
  }

  document.addEventListener("DOMContentLoaded", function () {
    const url = getQueryParameter("url");
    const k1  = getQueryParameter("k1");
    const k2  = getQueryParameter("k2");
    const img = getQueryParameter("img");

    if (!url || !k1 || !k2) {
      console.error("Faltan parámetros");
      return;
    }

    const imageUrl = img
      ? `https://disney.images.edge.bamgrid.com/ripcut-delivery/v2/variant/disney/${img}/compose`
      : "";

    const playerInstance = jwplayer("player").setup({
      playlist: [{
        image: imageUrl,
        sources: [{
          file: "https://iaw5b.envivoslatam.org:443/tudn_usa/tracks-v1a1/mono.m3u8?ip=45.224.153.13&token=6b7ead7fddd6812f82b0bb4e4b319991963f0a34-93-1772298147-1772244147",
          type: "dash",
          drm: {
            clearkey: {
              keyId: k1,
              key: k2
            }
          }
        }]
      }],
      autostart: true,
      width: "100%",
      height: "100%",
      stretching: "uniform",   // modo normal: proporción correcta
      skin: { name: "cyan" }
    });

    // Al entrar en fullscreen → forzar fill (sin bordes negros)
    playerInstance.on("fullscreen", function(e) {
      if (e.fullscreen) {
        playerInstance.setConfig({ stretching: "exactfit" });
      } else {
        playerInstance.setConfig({ stretching: "uniform" });
      }
    });
  });
</script>

<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    background: #000;
  }

  #player {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
  }
</style>

<div id="player"></div>
